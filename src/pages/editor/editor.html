<ion-header *ngIf="!api.fullscreen">
  <ion-toolbar>

      <button ion-button menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>

    <ion-title *ngIf="api.data.length > 0 && api.data[api.current]">
      <ion-input
        (change)="api.change()"
        (ngModelChange)="api.data[api.current].modified = 1;"
        [(ngModel)]='api.data[api.current].name'
        placeholder="{{api.data[api.current].name}}">
      </ion-input>
    </ion-title>


    <ion-buttons end *ngIf="initialized">

      <button *ngIf="api.data.length > 0 && api.data[api.current]" ion-button small  icon-only (click)="api.change()" [disabled]="api.data[api.current].modified == 0">
        <ion-icon name="send"></ion-icon>
      </button>

    </ion-buttons>

  </ion-toolbar>
</ion-header>

<!--<ion-fab top left edge *ngIf="api.fullscreen">
   <button ion-fab mini menuToggle><ion-icon name="menu"></ion-icon></button>
 </ion-fab>-->


<ion-content class="no-scroll paper" [ngClass]="{'fullscreen': api.fullscreen}">
  <ion-slides #mySlider
  [direction] = "vertical"
  [slidesPerView] = "1"
  [initialSlide] = "api.getCurrent()"
  [pager] = "true"
  [paginationType] = "fraction"
  [parallax] = "true"
  (ionSlideDidChange)="slideDidChange()" (ionSlideWillChange)="slideWillChange()">
    <ion-slide *ngFor="let e of api.data">
      <ion-item [hidden]="!initialized">
        <ion-label stacked>Titel</ion-label>
        <ion-input [(ngModel)]="e.title" (change)="api.change()" (ngModelChange)="e.modified = 1;" placeholder="{{e.title}}"></ion-input>
      </ion-item>
      <div class="editorWrapper">
        <codemirror [(ngModel)]="e.body" (blur)="api.change()" (change)="e.modified = 1;" [ngModelOptions]="{standalone: true}" [config]="cm_options">
        </codemirror>
        <!--
        <prosemirror [(data)]="e.body" (blur)="api.change()" (change)="e.modified = 1;" [config]="cm_options">
        </prosemirror>-->
      </div>
    </ion-slide>
  </ion-slides>

</ion-content>

<ion-footer *ngIf="!api.fullscreen">
  <ion-toolbar>

    <ion-buttons start>
      <button ion-button clear icon-only (click)="slider.slidePrev()" [disabled]="slider.isBeginning()">
        <ion-icon name="arrow-back"></ion-icon>
      </button>
    </ion-buttons>

    <ion-title>
      <button ion-button clear icon-only (click)="addPage()">
        <ion-icon name="add"></ion-icon>
      </button>
      <button ion-button clear (click)="tgInfo = !tgInfo" *ngIf="api.data.length > 0 && api.data[api.current]">
        <ion-badge *ngIf="tgInfo" item-right>Id: {{api.data[api.current].id}} Chars: {{api.data[api.current].body.length}} Words: {{wordcount(api.data[api.current].body)}}</ion-badge>
        <ion-icon *ngIf="!tgInfo" name="information-circle-outline"></ion-icon>
      </button>
    </ion-title>

    <ion-buttons end *ngIf="initialized">
      <button ion-button clear icon-only (click)="slider.slideNext()" [disabled]="slider.isEnd()">
        <ion-icon name="arrow-forward"></ion-icon>
      </button>
    </ion-buttons>

  </ion-toolbar>
</ion-footer>
