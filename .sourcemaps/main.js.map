{"version":3,"sources":["../../node_modules/@angular/core/fesm5 lazy","../../src lazy","../../src/pages/settings/settings.ts","../../src/pages/editor/editor.ts","../../src/pages/editor/editor-popover.ts","../../src/pages/editor/settings-popover.ts","../../src/pages/book/book.ts","../../src/pages/exports/exports.ts","../../src/pages/exports/exports-popover.ts","../../src/app/main.ts","../../src/app/app.module.ts","../../src/app/app.component.ts","../../src/services/rfapi.component.ts","../../util (ignored)","webpack:///util (ignored)?8945","../../fs (ignored)","../../http (ignored)","../../https (ignored)","../../src/directives/shrink.ts","../../src/pipes/myfilter.pipe.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 215;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@angular/core/fesm5 lazy\n// module id = 215\n// module chunks = 1","function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncatched exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = 258;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src lazy\n// module id = 258\n// module chunks = 1","import { Component } from '@angular/core';\nimport { Http, Headers } from '@angular/http';\nimport { NavController } from 'ionic-angular';\nimport { Api } from '../../services/rfapi.component';\n\n@Component({\n  selector: 'page-settings',\n  templateUrl: 'settings.html'\n})\nexport class Settings {\n\n  errorMessage: any;\n\n  signup: any =  {\n    email: \"\",\n    group: \"\",\n    sent: false,\n    error: false,\n    message: \"\",\n    emit: async function() {\n      try {\n        let _headers = new Headers({'Content-Type': 'application/json'});\n        let _res = await this.http.post(\n          this.api.credentials.server + \"/signup\", \n          JSON.stringify({email: this.signup.email, group: this.signup.group}),\n          {headers: _headers}).toPromise();\n        this.signup.sent = _res.ok === true && _res.json().state === \"ok\";\n        this.signup.error = _res.json().state === \"error\"\n        this.signup.message = _res.json().message;\n      } catch (err) {\n        this.api.showAlert(\"Connection Failed\", \"Check the server url or enable your internet connection.\");\n      }\n      \n    }.bind(this)\n  }\n\n  constructor(\n    public navCtrl: NavController,\n    public api:Api,\n    private http: Http\n  )\n  {\n    this.http = http;\n  }\n\n  ngOnInit() {\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/settings/settings.ts","\nimport { Component, ViewChild } from '@angular/core';\nimport { Printer, PrintOptions } from '@ionic-native/printer';\nimport { Platform, NavController, Slides, Events, AlertController, LoadingController, ModalController } from 'ionic-angular';\nimport { ProsemirrorModule } from 'ng2-prosemirror';\nimport { Api } from '../../services/rfapi.component';\nimport { PopoverEditor } from './editor-popover';\nimport { PopoverSettings } from './settings-popover';\n\n//import 'codemirror/mode/markdown/markdown.js';\n//import 'codemirror/addon/scroll/simplescrollbars.js';\n//import 'codemirror/addon/fold/foldcode.js';\n//import 'codemirror/addon/fold/foldgutter.js';\n//import 'codemirror/addon/fold/markdown-fold.js';\nimport {Converter} from \"showdown/dist/showdown\";\n\n@Component({\n  selector: 'page-editor',\n  templateUrl: 'editor.html',\n  providers: [Printer]\n})\n\nexport class Editor {\n  service: any;\n  content: any;\n  mySlideOptions: any;\n  initialSlide: number = 0;\n  initialized: boolean = false;\n\n  afterSaveCallback: any;\n  confirm: any;\n  timeout_change: any;\n  findString: any;  \n\n  /*cm_options: any = {\n    viewportMargin: 10,\n    mode: 'markdown',\n    lineNumbers: false,\n    theme: \"default\",\n    inputStyle: \"textarea\",\n    lineWrapping: true,\n    scrollbarStyle: 'overlay',\n    foldGutter: true,\n    gutters: [\"CodeMirror-foldgutter\"]\n  };\n*/\n\n  @ViewChild('mySlider') slider: Slides;\n  // @ts-ignore\n  @ViewChild('myProsemirror') prosemirror:ProsemirrorModule;\n\n  constructor(\n    public navCtrl: NavController,\n    public api:Api,\n    public events: Events,\n    public alert: AlertController,\n    public loadingCtrl: LoadingController,\n    public platform: Platform,\n    private modalCtrl: ModalController,\n    public printer: Printer\n  ) {\n    var self = this;\n\n    //self.cm_options.cursorBlinkRate = self.platform.is('core') ? \"500\" : -1;\n\n    events.subscribe('page:change', (page) => {\n      console.log(\"got page change\");\n      self.slider.slideTo(page);\n      /*\n      if (self.slider.getSlider() !== undefined && typeof self.slider.slideTo === \"function\") {\n        setTimeout(() => {\n          console.log('done')\n          self.slider.slideTo(page);\n        }, 250);\n      }*/\n    });\n\n    events.subscribe('page:redraw', (page) => {\n      console.log(\"got page redraw\");\n      self.slider.slideTo(self.slider.getActiveIndex(), 0, false)\n      /*\n      console.log(self.slider);\n      if (self.slider.getSlider() !== undefined) {\n        setTimeout(() => {\n          let s = self.slider.getSlider();\n          //s.update();\n          self.slider.slideTo(self.slider.getActiveIndex(), 0, false);\n        }, 250);\n      }*/\n    });\n\n    //console.log(\"Initialize Slide \", self.initialSlide);\n    //if (self.initialized && self.slider) {\n    //  self.slider.slideTo(self.initialSlide, 0);\n    //}\n    self.mySlideOptions = {\n      direction: \"vertical\",\n      onlyExternal: true,\n      slidesPerView: 1,\n      runCallbacksOnInit: false,\n      preventClicksPropagation: false,\n      preventClicks: false,\n      initialSlide: self.api.getCurrent(),\n      onInit: (slides: any) => {\n        self.initialized = true;\n      }\n    };\n  }\n\n  trackByFn(index, i) {\n    return i.syncId;\n  }\n \n  showOptions(data) {\n    console.log(this, data, this.prosemirror);\n    let modal = this.modalCtrl.create(PopoverSettings, {api: this.api, data: data}, {showBackdrop: true});\n    modal.present();\n  }\n\n  showUpload(data) {\n    console.log('opening modal for document ', data.id);\n    let modal = this.modalCtrl.create(PopoverEditor, {api: this.api, data: data}, {showBackdrop: true});\n    modal.present();\n    modal.onDidDismiss(d => {\n      if (d !== undefined) {\n        // @ts-ignore\n        this.prosemirror.insertAttachement(d)\n      }\n    });\n  }\n\n  openModal(mode) {\n\n    var _title, _message, _placeholder, _data, _value;\n\n    var self = this;\n\n    if (mode === \"set-title\") {\n      _title = \"Title\";\n      _placeholder = this.api.data[this.api.getCurrent()].title;\n      _value = _placeholder != 'Empty Title' ? _placeholder : false;\n      _data = \"title\";\n      _message = \"Set Document Title\";\n    }\n    if (mode === \"set-identifier\") {\n      _title = \"ID\";\n      _placeholder = this.api.data[this.api.getCurrent()].name;\n      _data = \"name\";\n      _value = _placeholder != 'rf001' ? _placeholder : false;\n      _message = \"Set Document Identifier\";\n    }\n\n    let _confirm = this.alert.create({\n      title: _title,\n      message: _message,\n      inputs: [\n        {\n          name: _title,\n          placeholder: _placeholder,\n          value: _value\n        },\n      ],\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: data => {\n            console.log('Cancel clicked');\n          }\n        },\n        {\n          text: 'Save',\n          handler: data => {\n            console.log('Saved clicked', data);\n            self.api.data[self.api.getCurrent()][_data] = data[_title];\n            self.api.change();\n          }\n        }\n      ]\n    });\n    _confirm.present();\n  }\n\n  ngAfterViewInit() {\n    this.initialized = true;\n    this.slider.onlyExternal = true;\n    this.slider.paginationType = \"fraction\";\n    this.slider.simulateTouch = false;\n    this.slider.touchEventsTarget = \"container\";\n    this.slider.keyboardControl = false;\n  }\n\n/*\n  ngAfterViewChecked() {\n    if (this && this.slider && this.slider.getSlider() !== undefined && typeof this.slider.slideTo === \"function\") {\n      if (Number(this.slider.getActiveIndex()) !== this.api.getCurrent()) {\n        console.log(\"Manual Update needed...\")\n        //this.slider.slideTo(this.api.getCurrent())\n      }\n    }\n  }\n*/\n  ionViewDidLoad() {\n\n  }\n\n  ionViewCanLeave(): Promise<boolean> {\n    if (this.initialized && this.api.data && this.api.data.length > 0) {\n      this.api.change();\n    }\n    return new Promise((resolve, reject) => {\n      let _confirm = this.alert.create({\n        title: 'Unsafed Changes',\n        message: 'Leaving the editor might cause data loss.',\n        buttons: [{\n          text: 'OK',\n          handler: () => {\n            resolve(true);\n          },\n        }],\n      });\n      if (this.api.data && this.api.data.length > 0 && this.api.data[this.api.getCurrent()].modified == 1) {\n        _confirm.present();\n      }\n      else {\n        resolve(true);\n      }\n    })\n  }\n\n  slideWillChange() {\n    if (!this.initialized) return false;\n    this.api.setCurrent(this.slider.getActiveIndex());\n  }\n\n  _checkunsafed(cb) {\n    try {\n      if (this.api.data[this.api.getCurrent()].modified == 1) {\n        this.afterSaveCallback = cb;\n        this.confirm = this.loadingCtrl.create({content: 'Saving Changes'})\n        this.confirm.present();\n      }\n      else {\n        this.afterSaveCallback = null;\n        cb(this);\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  next() {\n    this._checkunsafed(function(t){t.slider.slideNext();});\n  }\n\n  prev() {\n    this._checkunsafed(function(t){t.slider.slidePrev();});\n  }\n\n\n  change() {\n    this.api.change();\n    if (this.afterSaveCallback) {\n      this.afterSaveCallback(this);\n      this.afterSaveCallback = null;\n      this.confirm.dismiss();\n    }\n  }\n\n  changeStatus(e) {\n    console.log(e);\n  }\n\n  changeDebounce() {\n    if (this.timeout_change !== null) {\n      clearTimeout(this.timeout_change);\n    }\n    this.api.data[this.api.getCurrent()].modified = 1;\n    this.timeout_change = setTimeout(() => {\n      this.change();\n    }, 1000);\n  }\n\n  slideDidChange() {\n    if (!this.initialized) return false;\n  }\n\n  addPage() {\n    if (!this.initialized) return false;\n    let index = this.api.data.length == 0 ? 0 : this.slider.getActiveIndex() + 1;\n    this.api.add(index);\n    console.log(\"Page Added\")\n  }\n\n  printPage() {\n    const converter = new Converter();\n    converter.setOption('simpleLineBreaks', true);\n    var self  = this;\n    var _print = '<!DOCTYPE html><html><head>  '\n               + '<link href=\"build/print.css\" rel=\"stylesheet\" media=\"print\">'\n               + '</head><body class=\"print\">'\n               + '<div class=\"title\">' + converter.makeHtml(self.api.data[self.api.getCurrent()].title) + '</div>'\n               + '<div class=\"body\">' + converter.makeHtml(self.api.data[self.api.getCurrent()].body) + '</div>'\n               + '</html>';\n\n    /* Cordova Air Print */\n\n    if (self.platform.is('cordova')) {\n      this.printer.isAvailable().then(\n        () => {\n        let options: PrintOptions = {\n             name: self.api.data[self.api.getCurrent()].title,\n             duplex: true,\n             landscape: false,\n             grayscale: true\n         };\n         this.printer.print(_print, options).then(\n          () => {console.log(\"Printing succeeded\");},\n          () => {console.log(\"No Printer Available\");}\n         );\n       },\n       () => {console.log(\"No Printer Available\");}\n     );\n    }\n    else {\n\n      /* Browser Print */\n\n      if (!window.frames[\"print-frame\"]) {\n        var elm = document.createElement('iframe');\n        elm.setAttribute('id', 'print-frame');\n        elm.setAttribute('name', 'print-frame');\n        elm.setAttribute('style', 'display: none;');\n        document.body.appendChild(elm);\n      }\n\n      var _frame = <HTMLIFrameElement>document.getElementById('print-frame');\n      var _doc;\n      if (_frame.contentDocument) { // DOM\n          _doc = _frame.contentDocument;\n      } else if (_frame.contentWindow) { // IE win\n          _doc = _frame.contentWindow.document;\n      } else {\n          _doc = false;\n      }\n      \n\n      if (_doc !== false) {\n        _doc.write(_print);\n        _doc.close();\n        if (window.navigator.userAgent.indexOf (\"MSIE\") > 0) {\n            _frame.contentWindow.document.execCommand('print', false, null);\n        } else {\n            _frame.contentWindow.focus();\n            _frame.contentWindow.print();\n        }\n      }\n    }\n  }\n\n  selectAll(event) {\n    if (!this.initialized) return false;\n    event.target.select();\n  }\n\n  wordcount(str) {\n    return str.split(/[^\\s]+/).length;\n  }\n\n  showInfo() {\n    let _message = `Rokfor Id: ${this.api.data[this.api.getCurrent()].id}<br>Characters: ${this.api.data[this.api.getCurrent()].body.length}<br>Words: ${this.wordcount(this.api.data[this.api.getCurrent()].body)}`;\n    let _confirm = this.alert.create({\n      title: \"Document Statistics\",\n      message: _message,\n      buttons: [\n        {\n          text: 'Ok',\n          handler: data => {\n            console.log('Cancel clicked');\n          }\n        }\n      ]\n    });\n    _confirm.present();\n  }\n\n  search(a) {\n    console.log(a);\n    let _confirm = this.alert.create({\n      title: \"Search\",\n      message: \"Search Term\",\n      inputs: [\n        {\n          name: \"SearchTerm\",\n          value: this.findString ? this.findString : \"\"\n        },\n      ],\n      buttons: [\n        {\n          text: 'Clear',\n          handler: data => {\n            console.log('Cancel clicked');\n            this.findString = false;\n          }\n        },\n        {\n          text: 'Search',\n          handler: data => {\n            console.log('Saved clicked', data);\n            this.findString = data.SearchTerm;\n          }\n        }\n      ]\n    });\n    _confirm.present();\n  }\n\n  deletePage() {\n    this.api.delete(this.api.getCurrent());\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/editor/editor.ts","import { Component } from '@angular/core';\nimport { NavParams, ViewController } from 'ionic-angular';\n//import { FileTransfer, FileUploadOptions, FileTransferObject } from '@ionic-native/file-transfer';\nimport { File } from '@ionic-native/file';\n\n@Component({\n  template: `\n  <ion-header>\n    <ion-navbar>\n      <ion-buttons start>\n        <button ion-button (click)=\"dismiss()\">Close</button>\n      </ion-buttons>\n      <ion-title>Files for {{i.name}}</ion-title>\n    </ion-navbar>\n  </ion-header>\n  <ion-content class=\"assets\">\n    <ion-list>\n      <ion-item-divider>\n          <ul>\n            <li><b>Dynamic</b> Linked data, responsive on the web, probably conversion to pdf in print. \n            <li><b>Raw</b> Use raw file as image tag.\n            <li><b>Web</b> Use small variant as image tag.\n          </ul>\n      </ion-item-divider>\n      <ion-item *ngFor=\"let i of assets; let _in = index;\">\n        <ion-thumbnail item-start>\n          <img src=\"{{i.Thumbnail}}\">\n        </ion-thumbnail>\n        <ion-label stacked>Caption</ion-label>\n        <ion-input autocapitalize=off type=\"text\" (ngModelChange)=\"changeCaption()\" [(ngModel)]=\"i.Captions[0]\"></ion-input>\n        <button ion-button item-end (click)=\"addEditor(i, false, false, _in)\">Dynamic</button>\n        <button ion-button item-end (click)=\"addEditor(i, true, true)\">Raw</button>\n        <button ion-button item-end (click)=\"addEditor(i, true, false)\">Web</button>\n        <button ion-button color=\"danger\" item-end (click)=\"delete(_in)\">Delete</button>\n      </ion-item>\n    </ion-list>\n  </ion-content>\n  <ion-footer padding>\n    <input class=\"custom-file-input\" type=\"file\" (change)=\"loadImageFromDevice($event)\" id=\"file-input\"  accept=\"image/png, image/jpeg, application/pdf\">\n  </ion-footer>\n  `,\n  providers: [\n    // FileTransfer,\n    // File,\n    // FileTransferObject\n  ]\n})\nexport class PopoverEditor {\n  i: any;\n  assets: any;\n  timeout: any;\n  api: any;\n\n      \n  constructor(\n    public viewCtrl: ViewController,\n    private navParams: NavParams,\n    //private transfer: FileTransfer, \n    //private file: File\n   ) {\n     this.timeout = [];\n     this.assets = [];\n  }\n\n  dismiss() {\n    this.viewCtrl.dismiss();\n  }\n\n  async delete(i) {\n    this.api.showLoadingCtrl('Deletion in Progress');\n    let _assets = await this.api._call('/assets',false,{id: this.i.id, mode: 'delete', assets: this.assets, delete: i},true)\n    let _del = this.assets.splice(i,1);\n    this.api.hideLoadingCtrl();\n  }\n\n  changeCaption() {\n    if (this.timeout.caption !== null) {\n      clearTimeout(this.timeout.caption);\n    }\n    this.timeout.caption = setTimeout(() => {\n      this.updateData();\n    }, 1000);\n  }\n\n  async loadImageFromDevice(event) {\n    this.api.showLoadingCtrl('Upload in Progress');\n    const reader = new FileReader();\n    const file = event.target.files[0];\n    reader.readAsDataURL(file);\n    reader.onload = async () => { // note using fat arrow function here if we intend to point at current Class context.\n      await this.api._call('/assets',false,{id: this.i.id, binary: reader.result, size: file.size, type: file.type, name: file.name, mode: 'post'},true)\n      let _assets = await this.api._call('/assets',false,{id: this.i.id, mode: 'get'},true)\n      if (_assets.length) {\n        this.assets = _assets\n      }\n      this.api.hideLoadingCtrl();\n    };\n  }\n\n  addEditor(element, isImage, original, anchorIndex) {\n    original = original || false;\n    isImage  = isImage  || false;\n    anchorIndex = anchorIndex || false;\n    this.viewCtrl.dismiss({element: element, isImage: isImage, original: original, anchorIndex: 1 + (anchorIndex || 0), fieldName: 'Attachements '});\n  }\n\n  /*upload() {\n    const fileTransfer: FileTransferObject = this.transfer.create();\n    let _file = \"\";\n    let _upload_api = \"/upload\"\n\n    let _options: FileUploadOptions = {\n      fileKey: 'ionicfile',\n      fileName: 'ionicfile', \n      chunkedMode: false,\n      mimeType: \"image/jpeg\",\n      headers: {}\n    }\n    \n    fileTransfer.upload(_file, _upload_api, _options).then((entry) => {\n      console.log('upload complete - refresh');\n      this.loadData();\n    }, (error) => {\n      console.log('download error');\n    });\n  }*/\n\n  async updateData() {\n    let _assets = await this.api._call('/assets',false,{id: this.i.id, mode: 'update', assets: this.assets},true)\n    console.log(_assets);\n  }\n\n  async loadData() {\n    let _assets = await this.api._call('/assets',false,{id: this.i.id, mode: 'get'},true)\n    if (_assets.length) {\n      this.assets = _assets\n    }\n  }\n\n  ngOnInit() {\n    this.i = this.navParams.data.data;\n    this.api = this.navParams.data.api;\n    console.log(this.i)\n    this.loadData();\n    /*    \n    this.i:\n    body: \"# Mensch und Maschine↵↵Was geschieht im Grenzbereiches zwischen Mensch und Computer? Wer beeinflusst wen – der Computer den Menschen…\"\n    component: function(viewCtrl, navParams)\n    id: 3138\n    issue: \"7\"\n    moddate: 0\n    modified: 0\n    name: \"01 Persönliche Arbeiten / Background\"\n    opts: {showBackdrop: true, enableBackdropDismiss: true}\n    sort: 0\n    status: true\n    syncId: \"a914f501-d5a0-c1f3-b3dd-fa4ed7c2436d\"\n    title: \"Was bisher geschah\"*/\n\n    // Step 1: Load Assets \n\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/editor/editor-popover.ts","import { Component } from '@angular/core';\nimport { NavParams, ViewController } from 'ionic-angular';\n\n\n@Component({\n  template: `\n  <ion-header>\n    <ion-navbar>\n      <ion-buttons start>\n        <button ion-button (click)=\"dismiss()\">Close</button>\n      </ion-buttons>\n      <ion-title>Document Settings</ion-title>\n    </ion-navbar>\n  </ion-header>\n  <ion-content>\n    <ion-item-group>\n        <ion-item-divider color=\"danger\">\n            Settings might not be implemented in all export templates\n        </ion-item-divider>\n        <ion-item-divider color=\"light\">Language Settings</ion-item-divider>\n        <ion-item *ngFor=\"let s of schema.language;\">\n            <ion-label>{{s[1]}}</ion-label>\n            <ion-toggle [(ngModel)]=\"values.settings[s[0]]\"></ion-toggle>\n        </ion-item>\n    </ion-item-group>\n    <ion-item-group>\n        <ion-item-divider color=\"light\">Layout Settings</ion-item-divider>\n        <ion-item *ngFor=\"let s of schema.layout;\">\n            <ion-label>{{s[1]}}</ion-label>\n            <ion-toggle [(ngModel)]=\"values.settings[s[0]]\"></ion-toggle>\n        </ion-item>\n    </ion-item-group>\n    <ion-item-group>\n        <ion-item-divider color=\"light\">Font Settings</ion-item-divider>\n        <ion-item *ngFor=\"let s of schema.font;\">\n            <ion-label>{{s[1]}}</ion-label>\n            <ion-toggle [(ngModel)]=\"values.settings[s[0]]\"></ion-toggle>\n        </ion-item>\n    </ion-item-group>\n    <ion-item-group>\n      <ion-item-divider color=\"light\">Image Handling</ion-item-divider>\n      <ion-item *ngFor=\"let s of schema.image;\">\n          <ion-label>{{s[1]}}</ion-label>\n          <ion-toggle [(ngModel)]=\"values.settings[s[0]]\"></ion-toggle>\n      </ion-item>\n  </ion-item-group>\n  </ion-content>\n  `,\n})\n\n\nexport class PopoverSettings {\n  values: any;\n  schema: any;\n  \n      \n  constructor(\n    public viewCtrl: ViewController,\n    private navParams: NavParams,\n   ) {\n       this.schema = {\n           \"language\" : [\n                [\"french\"    , \"French Hyphenation\"],\n                [\"english\"   , \"English Hyphenation\"],\n                [\"italian\"   , \"Italian Hyphenation\"]\n            ],\n            \"layout\": [\n                [\"newpage\"   , \"Start on Blank Page\"],\n                [\"hidetitle\" , \"Hide Title, add to ToC\"],\n                [\"hidetoc\"   , \"Hide in ToC\"],\n                [\"wide\"      , \"Wide\"],\n                [\"small\"     , \"Small\"],\n            ],\n            \"font\": [\n                [\"grotesk\"   , \"Option 1: Grotesk\"],\n                [\"antiqua\"   , \"Option 2: Antiqua\"],\n                [\"smallfont\" , \"Option 3: Small\"],\n                [\"largefont\" , \"Option 4: Large\"],\n            ],\n            \"image\": [\n                [\"size1\"   , \"Option 1: Small\"],\n                [\"size2\"   , \"Option 2: Medium\"],\n                [\"size3\"   , \"Option 3: Large\"]\n            ]\n        };\n  }\n\n  dismiss() {\n    this.navParams.data.api.change();\n    this.viewCtrl.dismiss();\n  }\n\n\n  ngOnInit() {\n    this.values = this.navParams.data.data;\n    this.values.settings = this.values.settings || {}\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/editor/settings-popover.ts","import { Component } from '@angular/core';\nimport { NavController } from 'ionic-angular';\nimport { Api } from '../../services/rfapi.component';\n\n\n/*\n  Generated class for the Book page.\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n  Ionic pages and navigation.\n*/\n@Component({\n  selector: 'page-book',\n  templateUrl: 'book.html'\n})\nexport class Book {\n\n  constructor(\n    public api:Api,\n    public navCtrl: NavController,\n  ) {\n  }\n\n  ionViewDidLoad() {\n    //console.log(this.api.issues, this.api.current.issue);\n  }\n\n\n\n\n  deleteIssue(issueId) {\n    this.api._call(\"/delete\", `Deleted Book ${issueId}`, {issue: issueId}, false);\n  }\n\n\n  shareIssue(issueId) {\n    let _confirm = this.api.alert.create({\n      title: \"Share Book\",\n      message: \"Please enter the access key user to invite:\",\n      inputs: [\n        {\n          name: \"invite\",\n          placeholder: \"xxxxxxxxxxxxx-xxxxxxxxxxxx\"\n        },\n      ],\n      buttons: [\n        {\n          text: 'Cancel',\n          handler: data => {}\n        },\n        {\n          text: 'Save',\n          handler: data => {\n            console.log(data.invite);\n            this.api._call(\"/share\", \"You just shared a book.\", {issue: issueId, invite: data.invite}, false);\n          }\n        }\n      ]\n    });\n    _confirm.present();\n  }\n\n  addIssue() {\n    this.api._call(\"/add\", \"There is a new issue in your booklist\", {}, false);\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/book/book.ts","import { Component } from '@angular/core';\nimport { NavController, ModalController, Events, LoadingController } from 'ionic-angular';\nimport { Api } from '../../services/rfapi.component';\nimport { PopoverPage } from './exports-popover';\nimport { DocumentViewer, DocumentViewerOptions } from '@ionic-native/document-viewer';\n\nimport { FileTransfer, FileTransferObject } from '@ionic-native/file-transfer';\nimport { File } from '@ionic-native/file';\n\n/*\n  Generated class for the Book page.\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n  Ionic pages and navigation.\n*/\n\n@Component({\n  selector: 'page-exports',\n  templateUrl: 'exports.html',\n  providers: [\n    DocumentViewer,\n    FileTransfer,\n    File,\n    FileTransferObject\n  ]\n})\n\nexport class Exports {\n  exporters: any;\n  activeExporter: any;\n  events: Events;\n\n  constructor(\n    public api:Api,\n    public navCtrl: NavController,\n    private modalCtrl: ModalController,\n    public event: Events,\n    public loadingCtrl: LoadingController,\n    private document: DocumentViewer,\n    private transfer: FileTransfer, \n    private file: File\n  ) {\n    this.exporters = [];\n    this.activeExporter = false;\n    this.events = event;    \n  }\n  async ionViewDidLoad() {\n    let _data = await this.api._call(\"/exporters\", \"\", {}, true);\n    this.exporters = _data.exporters;\n    if (this.exporters == null) {\n      this.api.showAlert(\"No Connection\", \"Exporting a book requires a internet connection\", null);\n    }\n  }\n  async export() {\n    let _payload = {\n      exporterId: this.activeExporter, \n      issueId: this.api.current.issue\n    };\n    let loader = this.loadingCtrl.create({content: \"Please wait...\"});\n    loader.present();\n    let _d = await this.api._call(\"/export\", \"\", _payload, true);\n    if (_d.state === 'ok' && _d.exporters.Success === \"ok\") {\n      this.events.publish('export:started');\n      loader.dismiss();\n    } else {\n      loader.dismiss();\n      this.api.showAlert(\"Exporter Error\", \"Exporter Error is currently not available.\", null);\n    }\n    \n  }\n\n\n\n  openModal(data) {\n    if (this.api.state.on_device) {\n      console.log(this.file);\n      const fileTransfer: FileTransferObject = this.transfer.create();\n      this.api.showLoadingCtrl('Downloading PDF...');\n      fileTransfer.download(data.Url, this.file.dataDirectory + 'file.pdf').then((entry) => {\n        console.log('download complete: ' + entry.toURL());\n        this.api.hideLoadingCtrl();\n        this.document.viewDocument(entry.toURL(), 'application/pdf', options)\n      }, (error) => {\n        this.api.hideLoadingCtrl();\n        console.log('download error');\n      });\n      const options: DocumentViewerOptions = {\n        title: 'My PDF'\n      }\n      \n    }\n    else {\n      let modal = this.modalCtrl.create(PopoverPage, data, {showBackdrop: true});\n      modal.present();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/exports/exports.ts","import { Component, ElementRef, ViewChild } from '@angular/core';\nimport { NavParams, ViewController, Events } from 'ionic-angular';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { PdfViewerComponent } from 'ng2-pdf-viewer';\n\ndeclare var electron: any;\n\n@Component({\n  template: `\n  <ion-header>\n    <ion-navbar>\n      <ion-buttons start>\n        <button ion-button (click)=\"dismiss()\">Close</button>\n      </ion-buttons>\n      <ion-title>{{i.Name}}</ion-title>\n    </ion-navbar>\n  </ion-header>\n  <ion-content class=\"reader\">\n    <div class=\"scroll-content\">\n      <pdf-viewer [src]=\"pdfSrc\" \n      [render-text]=\"true\"\n      [show-all]=\"true\"\n      [zoom]=\"zoom\"\n      [original-size]=\"true\"\n      (after-load-complete)=\"loadComplete($event)\"\n      style=\"display: block; background-color: #666;\"\n      ></pdf-viewer>\n    </div>\n  </ion-content>\n  <ion-footer>\n    <ion-toolbar class=\"btn-wrapper\">\n      <ion-buttons float-start>\n        <a ion-button primary>\n          {{page}}/{{pages}}\n        </a>\n      </ion-buttons>\n      <ion-title>\n        <button ion-button color=\"primary\" clear icon-start (click)=\"skip('up')\">\n          <ion-icon name=\"arrow-down\"></ion-icon>\n        </button>\n        <button ion-button color=\"primary\" clear icon-start (click)=\"skip('down')\">\n          <ion-icon name=\"arrow-up\"></ion-icon>  \n        </button>\n        <button ion-button color=\"primary\" clear icon-start (click)=\"scale(0.1)\">\n          <ion-icon name=\"add\"></ion-icon>\n        </button>\n        <button ion-button color=\"primary\" clear icon-start (click)=\"scale(-0.1)\">\n          <ion-icon name=\"remove\"></ion-icon>\n        </button>\n      </ion-title>\n      <ion-buttons end>\n        <a *ngIf=\"!electron\" ion-button primary [href]=\"cleanURL(i.Url)\" target=\"_blank\">Download</a>\n        <button *ngIf=\"electron\" ion-button  color=\"primary\" clear icon-start (click)=\"export()\">\n          <ion-icon name=\"folder\"></ion-icon>\n          Save\n        </button>\n      </ion-buttons>\n    </ion-toolbar>\n  </ion-footer>\n  `\n})\nexport class PopoverPage {\n  i: any;\n  electron: any;\n  events: Events;\n  pdfSrc: any;\n  pages: any;\n  page: 1;\n  zoom: 1.0;\n\n  @ViewChild(PdfViewerComponent) private pdfComponent: PdfViewerComponent;\n      \n  constructor(\n    public viewCtrl: ViewController,\n    private navParams: NavParams,\n    public sanitizer : DomSanitizer,\n    public event: Events\n   ) {\n    this.sanitizer = sanitizer;\n    this.electron  = electron; \n    this.events = event;\n    this.pages = 0;\n    this.zoom = 1.0;\n    this.page = 1;\n  }\n\n  scale(v) {\n    this.zoom += v;\n  }\n\n  loadComplete(pdf) {\n    console.log(pdf)\n    this.pages = pdf.pdfInfo.numPages\n  }\n\n  cleanURL(oldURL : string){\n    return this.sanitizer.bypassSecurityTrustResourceUrl(oldURL);\n  }\n  dismiss() {\n    this.viewCtrl.dismiss();\n  }\n  export() {\n    this.events.publish('export:saveattachment', this.i.Url);\n  }\n\n  skip(dir) {\n    if (dir==\"up\") {\n      this.page<this.pages?this.page++:this.page=1\n    }\n    else {   \n      this.page>2?this.page--:this.page=this.pages\n    }\n    this.pdfComponent.pdfViewer.scrollPageIntoView({\n      pageNumber: this.page\n    });\n  }\n\n  ngOnInit() {\n    this.i = this.navParams.data;\n    this.i.secureUrl = this.cleanURL(this.i.Url);\n    this.pdfSrc = this.i.Url;\n}\n\n\n\n\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/exports/exports-popover.ts","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app.module';\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/main.ts","import { NgModule, ErrorHandler } from '@angular/core';\nimport { IonicApp, IonicModule, IonicErrorHandler } from 'ionic-angular';\nimport { ProsemirrorModule } from 'ng2-prosemirror';\nimport { BrowserModule } from '@angular/platform-browser';\nimport { HttpModule} from '@angular/http';\nimport { MyApp } from './app.component';\nimport { Settings } from '../pages/settings/settings';\nimport { Editor } from '../pages/editor/editor';\nimport { PopoverEditor } from '../pages/editor/editor-popover';\nimport { PopoverSettings } from '../pages/editor/settings-popover';\n\nimport { Exports } from '../pages/exports/exports';\nimport { PopoverPage } from '../pages/exports/exports-popover';\nimport { Book } from '../pages/book/book';\nimport { Autoresize } from '../directives/shrink';\nimport { PdfViewerModule } from 'ng2-pdf-viewer';\nimport { MyFilterPipe } from '../pipes/myfilter.pipe';\n\n@NgModule({\n  declarations: [\n    MyApp,\n    Settings,\n    Editor,\n    PopoverEditor,\n    Book,\n    Exports,\n    PopoverPage,\n    PopoverSettings,\n    Autoresize,\n    MyFilterPipe\n  ],\n  imports: [\n    HttpModule,\n    BrowserModule,\n    IonicModule.forRoot(MyApp),\n    ProsemirrorModule,\n    PdfViewerModule\n  ],\n  bootstrap: [IonicApp],\n  entryComponents: [\n    MyApp,\n    Settings,\n    Editor,\n    Book,\n    PopoverEditor,\n    PopoverPage,   \n    PopoverSettings, \n    Exports\n  ],\n  providers: [\n    {provide: ErrorHandler, useClass: IonicErrorHandler}\n  ]\n})\nexport class AppModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component, ViewChild, NgZone } from '@angular/core';\nimport { Nav, Platform, Events, ToastController, LoadingController } from 'ionic-angular';\nimport { StatusBar } from '@ionic-native/status-bar';\nimport { SplashScreen } from '@ionic-native/splash-screen';\nimport { Settings } from '../pages/settings/settings';\nimport { Editor } from '../pages/editor/editor';\nimport { Book } from '../pages/book/book';\nimport { Exports } from '../pages/exports/exports';\nimport { Api } from '../services/rfapi.component';\nimport { DomSanitizer } from '@angular/platform-browser';\n//import { NullInjector } from '@angular/core/src/di/injector';\n\n\ndeclare var ipcRenderer: any;\ndeclare var electron: any;\n\n\n@Component({\n  templateUrl: 'app.html',\n  providers: [\n    StatusBar,\n    SplashScreen,\n    Api\n  ]\n})\n\n\n\nexport class MyApp {\n  @ViewChild(Nav) nav: Nav;\n\n\n  rootPage: any = Editor;\n  events: any;\n  pages: Array<{title: string, component: any, icon: string}>;\n  electron: any;\n\n  constructor(\n    public  platform:     Platform,\n    private api:          Api,\n    private statusBar:    StatusBar,\n    private splashScreen: SplashScreen,\n            events:       Events,\n    public  toastCtrl:    ToastController,\n    public  loadingCtrl:  LoadingController,\n    private zone:         NgZone,\n    private sanitizer:    DomSanitizer,\n\n  ) {\n    this.events = events;\n    this.initializeApp();\n    this.electron = electron;\n    // used for an example of ngFor and navigation\n    this.pages = [\n      { title: 'Settings', component: Settings, icon: 'settings' },\n      { title: 'Books',   component: Book, icon: 'book' },\n      { title: 'Editor',   component: Editor, icon: 'document' },\n      { title: 'Export',   component: Exports, icon: 'download' }    \n    ];\n  }\n\n  initializeApp() {\n\n    // let self = this;\n\n    if (ipcRenderer) {\n      \n      let loading = null;\n\n      ipcRenderer.on('progress:ipc', (event, message) => {\n        message = message * 1 > 100 ? 100 : message * 1;\n        let _html = this.sanitizer.bypassSecurityTrustHtml(`\n          <p>Download update</p>\n          <h4>\n          <div style=\"width: 100%; height: 0.5em; position: relative; padding: 0px; background: rgba(0,0,0,0.1);\">\n            <div style=\"width: ${message}%; height: 1em; position: absolute; left: 0px; top: 0px; height: 0.5em; background: rgba(0,0,0,0.1);\"></div>\n          </div>\n          </h4>\n        `);\n        if (loading === null) {\n          loading = this.loadingCtrl.create({\n            content: <string>_html,\n            spinner: \"crescent\"\n          });\n          loading.present();\n        }\n        else {\n          // Update Conent in the next cycle - seems a bug in ionic3:\n          // occuring if another item (alert/toast etc.) is dismissed\n          // content will not be updated automatically\n          this.zone.run(() => {\n            loading.setContent(_html);\n          });\n        }        \n        if (message * 1 > 99 && loading !== null) {\n          loading.dismiss();\n          loading = null;\n        }\n      });\n\n      ipcRenderer.on('update:ipc', (event, message) => {\n        let toast = this.toastCtrl.create({\n          message: message,\n          duration: 3000,\n          position: 'top',\n          showCloseButton: true\n        });\n        toast.present();\n      });\n      ipcRenderer.on('main:ipc', (event, message) => {\n        console.log(event, message)\n        if (message === 'leave-full-screen') {\n          this.toggleFs(false);\n        }\n        if (message === 'enter-full-screen') {\n          this.toggleFs(true);\n        }\n        if (this.nav.getActive().name === \"Editor\") {\n          if (message === 'next-document') {\n            if (this.nav.getActive().instance.slider.isEnd()) return;\n            this.nav.getActive().instance.slider.slideNext();\n          }\n          if (message === 'previous-document') {\n            if (this.nav.getActive().instance.slider.isBeginning()) return;\n            this.nav.getActive().instance.slider.slidePrev();\n          }\n          if (message === 'save-document') {\n            this.nav.getActive().instance.api.change();\n          }\n          if (message === 'new-document') {\n            this.nav.getActive().instance.addPage();\n          }\n          if (message === 'delete-document') {\n            this.nav.getActive().instance.deletePage();\n          }        \n          if (message === 'print-document') {\n            this.nav.getActive().instance.printPage();\n          }\n          if (message === 'set-title' || message === 'set-identifier') {\n            this.nav.getActive().instance.openModal(message);\n          }\n        }\n        if (message === 'export-data') {\n          ipcRenderer.send('master:ipc:export', this.api.data[this.api.current.page])\n        }\n      })\n      this.events.subscribe('export:saveattachment', (url) => {\n        ipcRenderer.send('master:ipc:saveattachment', url)\n        let toast = this.toastCtrl.create({\n          message: `Download started: ${url}`,\n          duration: 3000,\n          position: 'top'\n        });\n        toast.present();\n      })\n      ipcRenderer.on('store:ipc:downloadfinished', (event, message) => {\n        let toast = this.toastCtrl.create({\n            message: `File stored: ${message}`,\n            duration: 3000,\n            position: 'top'\n        });\n        toast.present();\n      });  \n    }\n\n\n    this.events.subscribe('export:started', (data) => {\n      this.api.exportRunning = true;\n      let toast = this.toastCtrl.create({\n          message: `Started export for «${this.api.current.issue_options.Name}»`,\n          duration: 3000,\n          position: 'top',\n          showCloseButton: true\n      });\n      toast.present();\n    });\n    \n    this.events.subscribe('export:ready', (data) => {\n      if (this.api.exportRunning === true) {\n        let toast = this.toastCtrl.create({\n          message: `Document ${data.Id} is generated and ready in the exports section.`,\n          duration: 3000,\n          position: 'top',\n          showCloseButton: true\n        });\n        toast.present();\n        this.api.exportRunning = false\n      }\n    });\n\n    this.platform.ready().then(() => {\n      this.statusBar.styleDefault();\n      this.splashScreen.hide();\n    });\n  }\n\n  toggleFs(mode) {\n\n    this.api.state.fullscreen = mode || !this.api.state.fullscreen;\n\n    /* Electron: Setting the local fullscreen flag after ipc callback in construtor */\n    if (electron) {\n      var window = electron.remote.getCurrentWindow();\n      window.setFullScreen(this.api.state.fullscreen);\n    }\n\n    this.events.publish('page:redraw');\n\n  }\n\n  openPage(page) {\n    // Reset the content nav to have just this page\n    // we wouldn't want the back button to show in this scenario\n    this.nav.setRoot(page.component);\n  }\n\n  async openEditor(page) {\n    // Reset the content nav to have just this page\n    // we wouldn't want the back button to show in this scenario\n    \n    if (this.nav.getActive().name !== \"Editor\") {\n      await this.nav.setRoot(Editor);\n    }\n     \n    this.events.publish('page:change', page);\n    \n  }\n\n  reorderPages(indexes) {\n    this.api.reorder(indexes);\n  }\n\n  deletePage(item) {\n    this.api.delete(item);\n  }\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import {Injectable} from \"@angular/core\";\nimport 'rxjs/Rx';\nimport { reorderArray, Platform, Events, LoadingController, AlertController } from 'ionic-angular';\nimport { Http, Headers } from '@angular/http';\nimport PouchDB from 'pouchdb';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n// @ts-ignore\nimport {parseBibFile} from \"bibtex\";\n\ninterface _dataset {\n    name:     string;\n    title:    string;\n    body:     string;\n    id:       number;\n    sort:     number;\n    moddate:  number;\n    modified: number;\n    issue:    number;\n    status:   boolean;\n    syncId:   string;\n    settings: any;\n};\n\ninterface _pouch {\n  credentials : any;\n  settings    : any;\n  data        : any;\n  issues      : any;\n  data_sync   : any;\n  issues_sync : any;\n  issues_rep  : any;\n};\n\ninterface _state {\n  busy        : number;\n  initialized : boolean;\n  message     : string;\n  logged_in   : boolean;\n  on_device   : boolean;\n  fullscreen  : boolean;\n};\n\ninterface _active {\n  page        : number;\n  issue       : number;\n  issue_options: any;\n  exports     : any;    \n}\n\ninterface _credentials {\n  user        : string;\n  key         : string; \n  server      : string;\n  group       : string; \n}\n\ninterface _debouncers {\n  book        : any;\n}\n\n@Injectable()\n\nexport class Api {\n  events: Events;\n\n  timeout: _debouncers = {\n    book: false\n  }\n\n  state: _state = {\n    busy        : 0,\n    initialized : false,\n    message     : \"\",\n    logged_in   : false,\n    on_device   : false,\n    fullscreen  : false\n  };\n  \n  current: _active  = {\n    page          : 0,\n    issue         : null,\n    issue_options : {},\n    exports       : {}\n  };\n  \n  pouch: _pouch = {\n    credentials : null,\n    settings    : null,\n    data        : null,\n    issues      : null,\n    data_sync   : null,\n    issues_sync : null,\n    issues_rep  : null\n  };\n\n  issueoptions: any = [\n    \"ShortTitle\",\n    \"InsideTitle\",\n    \"Subtitle\",\n    \"Author\",\n    \"AuthorShort\",\n    \"ISBN\",\n    \"Imprint\",\n    \"Blurb\",\n    \"Preface\",\n    \"Postface\",\n    \"Thanks\",\n    \"PrefaceTitle\",\n    \"PostfaceTitle\",\n    \"Copyright\",\n    \"CoverURL\",\n    \"SeriesNumber\",\n    \"CoverColor\",\n    \"TextColor\",\n    \"Language\",\n    \"Literature\"\n  ];\n\n  data: Array < _dataset > = [];\n  issues: any;\n  loading: any = null;\n  credentials: _credentials = {\n    user:   \"\",\n    key:  \"\",\n    server: \"\",\n    group: \"\"\n  };\n  dbsettings: any = {\n    size: 250,\n    auto_compaction: true,\n    adapter: 'idb'\n  };\n  helpers: any = {\n\n    /* \n      * Overwrites a document, if not existing, creates a new one \n      */\n\n    _pouchsave: function(db, document, data) {\n      return new Promise((resolve, reject) => {\n        db.get(document)\n        .then(function(doc) {\n          db.put({\n            _id: document,\n            _rev: doc._rev,\n            data: data\n          }).then((response) => {\n            resolve(true);\n          }).catch((err) => {\n            reject(err);\n          });\n        })\n        .catch(function (err) {\n          db.put({\n            _id: document,\n            data: data\n          })\n          .then((response) => {\n            resolve(true);\n          })\n          .catch((err)=>{\n            reject(err);\n          })\n        });\n      });\n    },\n    _pouchcreate: function(db, _adapter) {\n      _adapter = _adapter || 'idb';\n      return new Promise((resolve, reject) => {\n        let _dbsettings: any = {\n          size: 250,\n          auto_compaction: true,\n          adapter: _adapter\n        };\n        let _db = new PouchDB(db, _dbsettings);\n        setTimeout(() => {\n          if (_db)\n            resolve(_db);\n          else\n            reject(false);\n        }, 100);\n      })\n    },\n    _syncsettings: function(_this) {\n      return {\n        live: true,\n        retry: true,\n        auth: {\n          username: _this.credentials.user,\n          password: _this.credentials.key\n        }\n      };\n    },\n    _replicatesettings: function(_this) {\n      return {\n        auth: {\n          username: _this.credentials.user,\n          password: _this.credentials.key\n        }\n      };\n    }\n  }\n\n  min_server: Array < number > = [1,1,0];\n  exportRunning: any;\n  online: boolean;\n\n  constructor (\n      platform: Platform,\n      events: Events,\n      public loadingCtrl: LoadingController,\n      public alert: AlertController,\n      private http: Http,\n      private sanitizer : DomSanitizer,\n  ) {\n      this.http = http;\n      this.events = events;\n      this.state.on_device = platform.is('cordova');\n      this.sanitizer = sanitizer;\n\n      if (this.state.on_device) {\n        this.dbsettings.adapter = null;\n      }\n      \n      this.pouch.credentials = new PouchDB('rfWriter-credentials', this.dbsettings);\n      this.pouch.data = [];\n      this.exportRunning = false;\n      this.initialize();\n      this.events.subscribe('sync:contribution', function(e){\n        console.log(e);\n        if (e === 'change') {\n          this.hideLoadingCtrl();\n        }\n      }.bind(this))\n      this.online = navigator.onLine;\n      window.addEventListener('offline', () => {\n       this.online = false; \n       console.log(\"offline\")\n      });\n      window.addEventListener('online', () => {\n        this.online = true;\n        console.log(\"online\")\n      });\n  }\n\n  showLoadingCtrl(msg) {\n    if (this.loading == null) {\n      this.loading = this.loadingCtrl.create({content: msg});\n      this.loading.present();\n    }\n    else {\n      this.loading.setContent(msg);\n    }\n  }\n\n  hideLoadingCtrl() {\n    if (this.loading) {\n      this.loading.dismiss();\n      this.loading = null;\n    }\n  }\n\n\n  showAlert(title, message, cb) {\n    cb = cb || function(){};\n    let _confirm = this.alert.create({\n      title: title,\n      message: message,\n      buttons: [{\n        text: 'OK',\n        handler: () => {\n          cb;\n        },\n      }],\n    });\n    _confirm.present();\n  }\n\n  updateBibTex() {\n    let _index = false;\n    for (var _i = this.issueoptions.length - 1; _i >= 0; _i--) {\n      if (this.issueoptions[_i] == 'Literature') {\n        // @ts-ignore\n        _index = _i;\n      }\n    }\n    if (_index !== false) {\n      // @ts-ignore    \n      document.bibTex = document.bibTex || [];                \n      try {\n        // @ts-ignore\n        document.bibTex = parseBibFile(this.current.issue_options.Options[_index].value).entries_raw.map(e => ({value: e._id,  label: e._id}));          \n        // @ts-ignore\n        console.log(document.bibTex);\n      } catch (error) {\n        console.warn('could not parse bibtex');\n      }\n    }\n  }\n\n  /*\n   * INITIALIZE\n   *\n   * Creates Pouch Databases according to the current user\n   * returns if no user is active\n   * \n   */\n\n  async initialize() {\n    let self = this;\n    this.showLoadingCtrl(\"Initializing Credential Database\");\n    try {\n      let _c = await this.pouch.credentials.get('credentials');\n      this.credentials = _c.data;\n    } catch(err) {\n      console.log(err);\n    }\n    if (!this.credentials.user) {\n      this.hideLoadingCtrl();\n      return;\n    }\n\n    /*\n     * Settings Database: Containing current state\n     */\n\n    this.showLoadingCtrl(\"Initializing Settings Database\");\n    try {\n      this.pouch.settings = await this.helpers._pouchcreate(`rfWriter-settings-${this.credentials.user}`, self.dbsettings.adapter);\n    } catch (err) {\n      console.log(err);\n      this.hideLoadingCtrl();\n      return;\n    }\n    \n\n\n    /*\n     * Issues Database: Contains Id's of accessible issues\n     */\n\n    this.showLoadingCtrl(\"Initializing Issues Database\");\n    try {\n      this.pouch.issues = await this.helpers._pouchcreate(`rfWriter-issues-${this.credentials.user}`, self.dbsettings.adapter);  \n    } catch (err) {\n      this.hideLoadingCtrl();\n      return;      \n    }\n\n    /* Create Databases and Copy Configuration into issue_options */\n    let syncIssueWithDataOption = async function(_issue) {\n      try {\n        let _options = await self.pouch.data[_issue.Id].get(`contribution-${_issue.Id}-options`);\n        _issue.Name = _options.data.Name;\n        _issue.Options = _options.data.Options;\n      } catch (err) {\n        //console.log('could not load options...')\n      }\n\n      try {\n        let _options = await self.pouch.data[_issue.Id].get(`contribution-${_issue.Id}-exports`);\n        _issue.Exports = _options.data;\n      } catch (err) {\n        //console.log('could not load exports...')\n      }\n\n\n      if (_issue.Id == self.current.issue) {\n        self.current.issue_options = {\n          Name: _issue.Name,\n          Id: _issue.Id,\n          Options: _issue.Options || []\n        }\n        for (var _i = self.issueoptions.length - 1; _i >= 0; _i--) {\n          self.current.issue_options.Options[_i] = {\n            key: self.issueoptions[_i],\n            value: self.current.issue_options.Options[_i] && self.current.issue_options.Options[_i].value \n                        ? self.current.issue_options.Options[_i].value\n                        : \"\"\n          };\n        }\n        self.updateBibTex();\n      }\n    }\n\n    let syncIssue = function(_issue) {\n      return new Promise(async (resolve, reject) => {\n        try {\n          self.pouch.data[_issue.Id].replicate.from(`${self.credentials.server}/db/issue-${_issue.Id}`, self.helpers._replicatesettings(self))\n          .on('complete', function(info) { \n            try {\n              syncIssueWithDataOption(_issue);\n              //console.log(`Replicated: ${self.credentials.server}/db/issue-${_issue.Id}`)\n            } catch (err) {\n              console.log(err);\n            }\n            resolve(true);\n          })\n          .on('error', function(err){\n            try {\n              syncIssueWithDataOption(_issue);\n              //console.log(`Replicated: ${self.credentials.server}/db/issue-${_issue.Id}`)\n            } catch (err) {\n              console.log(err);\n            }\n            reject(false);\n          });\n        } catch (err) {\n          console.log(err);\n          reject(false);\n        }\n      });\n    }\n\n    let configureissues = async function(removedupes) {\n      removedupes = removedupes || false;\n      if (removedupes === true) {\n        console.log('check for duplicates');\n      }\n      return new Promise(async (resolve, reject) => {\n        try {\n          let _i = await self.pouch.issues.get('issues');\n          //console.log(_i.data);\n          self.issues = _i.data;\n        } catch (err) {\n          reject(false);\n        }\n\n        let _counter = 0;\n        try {\n          let _i = self.issues.Issues.length\n          while (_i--) {\n            let i = self.issues.Issues[_i];\n            // Create pouch db if no db is existing\n            let _html = `<p>Initial Data Sync</p>\n            <h4>\n              <div style=\"width: 100%; height: 0.5em; position: relative; padding: 0px; background: rgba(0,0,0,0.1);\">\n                <div style=\"width: ${100/self.issues.Issues.length*++_counter}%; height: 1em; position: absolute; left: 0px; top: 0px; height: 0.5em; background: rgba(0,0,0,0.1);\"></div>\n              </div>\n            </h4>`;\n\n            self.showLoadingCtrl(self.sanitizer.bypassSecurityTrustHtml(_html));\n\n            if (self.pouch.data[i.Id] === undefined) {\n              try {\n                self.pouch.data[i.Id] = await self.helpers._pouchcreate(`rfWriter-data-${i.Id}`, self.dbsettings.adapter);  \n                await syncIssue(i);\n              } catch (err) {\n                self.hideLoadingCtrl();\n                reject(false);\n              }\n            } else {\n              if (removedupes === true) {\n                console.log(`${i.Id} is a duplicate.`);\n                self.issues.Issues.splice(_i, 1);\n              }\n            }\n          }\n        } catch (err) {\n          //console.log(err);\n          self.hideLoadingCtrl();\n          reject(false);\n        }\n        self.hideLoadingCtrl();\n        resolve(true);\n      })\n    }\n\n\n  \n    /* Live Syncing */\n\n    let syncing = async function() {\n      //console.log(\"syncing…\")\n      self.pouch.issues_sync = self.pouch.issues.sync(`${self.credentials.server}/db/rf-${self.credentials.user}`, self.helpers._syncsettings(self))\n      .on('change',   function (info)  {\n        //console.log('----> sync issue change');\n        if (info.direction === \"pull\" ) {\n          try {\n            configureissues(false);\n          } catch (err) {\n            console.log(err);\n          }\n\n        }\n      })\n      .on('active',   function ()     {console.log('----> sync issue active'); self.state.logged_in = true;})\n      .on('denied',   function (err)  {console.log('----> sync issue denied'); self.state.logged_in = false;})\n      .on('error',    function (err)  {console.log('----> sync issue error'); self.state.logged_in = false;})\n      .on('complete', function (info) {console.log(\"----> sync issue complete/destroyed\");})      \n      \n      \n      try {\n        await configureissues(true);\n      } catch (err) {\n        console.log(err);\n      }\n\n      self.hideLoadingCtrl();\n\n      try {\n        await self.activateIssue();\n      } catch (err) {\n        console.log(err);\n      }\n    }\n\n    /* Start Replication: One-time/One-off for starters */\n\n    try {\n      this.pouch.issues.replicate.from(`${this.credentials.server}/db/rf-${this.credentials.user}`, this.helpers._replicatesettings(this))\n      .on('complete', function(info) { \n        self.state.logged_in = true;\n        syncing();\n      })\n      .on('error', function(err){\n        self.state.logged_in = false;\n        syncing();\n      });\n    } catch (err) {\n      console.log(err);\n    }\n\n  }\n\n  /*\n   * Sets current issue based on settings\n   * If no current issue, activate first in list\n   */\n\n  async activateIssue() {\n\n    return new Promise(async (resolve, reject) => {\n\n      this.showLoadingCtrl(\"Activating Issues\");\n\n      if (this.issues == undefined) {\n        this.hideLoadingCtrl();\n        reject(\"Issues undefined\");\n      }\n      //if (this.activationinprogress == true) {\n      //  this.hideLoadingCtrl();        \n      // resolve(\"Activation in Progress..\");\n      //}\n      \n      //this.activationinprogress = true;\n      \n      //console.log('Activate Issue Start', this.current.issue, this.issues);\n\n      // Create Local Data Entry and return first issue if no default and no id\n\n      if (this.current.issue == null) {\n\n        try {\n          let _c = await this.pouch.settings.get('current_issue');  \n          this.current.issue = _c.data * 1;\n          //console.log(`Default: ${this.current.issue}`);\n        } catch(err) {\n          try {\n            this.current.issue = this.issues.Issues[0].Id;  \n          } catch (err) {\n            reject(\"Issues undefined\");\n          }\n          //console.log(`Fallback: ${this.current.issue}`);\n        }\n      }\n\n      // Update local database if id parameter is passed\n\n      try {\n        await this.helpers._pouchsave(this.pouch.settings, 'current_issue', this.current.issue);  \n      } catch (err) {\n        //console.log('_pouchsave', err, this.pouch.settings, 'current_issue', this.current.issue);\n      }\n\n      try {\n        await this.activateData();  \n      } catch (err) {\n        console.log('activateData', err);\n      }\n      //console.log(\"there\")\n      //this.activationinprogress = false;\n      this.hideLoadingCtrl();\n      resolve(true);\n\n    });\n\n  }\n\n  trackReferences(doc) {\n    // @ts-ignore    \n    document.marks = document.marks || [];    \n    let element: any;\n    const regex = /:mark\\[(.*?)\\]/g;\n    while(element = regex.exec(doc.body)) {\n      // @ts-ignore\n      if (document.marks.filter(x => x.value === element[1]).length === 0) {\n        // @ts-ignore\n        document.marks.push({value: element[1],  label: element[1]});  \n      }\n    };\n  }\n\n  /* \n   * Loads data for the current issue, attaches a sync to it\n   *\n   */\n\n  activateData() {\n    return new Promise(async (resolve, reject) => {\n      // Return if no issue is active\n    \n      if (this.current.issue == undefined || !this.current.issue) {\n        console.log(`current issue failed: ${this.current.issue}`)\n        reject(false);\n      }\n        \n\n      this.showLoadingCtrl(\"Syncing active Issue\");\n      let self = this;\n\n      // Loading Data from Local Database\n      // Init: set to true for initial load, false on feed changes\n\n      let _localload = function(init) {\n        console.log(\"Localload\");\n        init = init || false;\n\n        return new Promise(async (resolve, reject) => {\n\n          try {\n            self.data = [];\n            let _result = await self.pouch.data[self.current.issue].allDocs({\n              include_docs: true,\n              attachments: false,\n              //binary: true, // Returns Files as Blobs, without as base64 string\n              startkey: `contribution-${self.current.issue}`,\n              endkey: `contribution-${self.current.issue}\\uffff`\n            });\n            _result.rows.sort(function (a, b) {\n               if (a.doc.data != null && b.doc.data != null && a.doc.data.sort && b.doc.data.sort)\n                  return a.doc.data.sort - b.doc.data.sort;\n               else\n                  return 0;\n            });\n            _result.rows.forEach((d) => {\n\n              if (d.doc._id === `contribution-${self.current.issue}-exports`) {\n\n                console.log(d);\n                \n                /* Set Current Issue */\n\n                self.current.exports = d.doc || self.current.exports;\n                self.current.exports.FilesArray = [];\n\n                if (d.doc.Status == 'Complete') {\n                  for (let _file in d.doc.File) {\n                    //console.log(d.doc._attachments[_file + '.pdf']);\n                    \n                    //let _data = \"\";\n                    //let _mime = \"\";\n                    //try {\n                    //  _data = d.doc._attachments[_file + '.pdf'].data;\n                    //  _mime = d.doc._attachments[_file + '.pdf'].content_type;\n                    //} catch (err) {\n                    //  console.log(\"no attachement/mime\");\n                    //}\n\n                    self.current.exports.FilesArray.push({\n                      \"Name\": _file,\n                      \"Status\": d.doc.Status || 'Error',\n                      \"Id\": d.doc.Id,\n                      \"Url\" : d.doc.File[_file] || \"\",\n                      \"Stats\" : d.doc.Pages[_file] || [],\n                      //\"Raw\": _data,\n                      //\"Data\": `data:${_mime};base64,${_data}`\n                    })\n                  }\n                }\n                self.events.publish('export:ready', self.current.exports);\n              } \n              else {\n                if (d.doc.data) {\n                  if (d.doc._id === `contribution-${self.current.issue}-options`) {\n                    \n                    /* Set Current Issue */\n\n                    self.current.issue_options.Id = d.doc.data.Id || self.current.issue_options.Id;\n                    self.current.issue_options.Name = d.doc.data.Name || self.current.issue_options.Name;\n                    self.current.issue_options.Options = d.doc.data.Options || self.current.issue_options.Options;\n\n                    /* Parse Options for completeness */\n\n                    for (var _i = self.issueoptions.length - 1; _i >= 0; _i--) {\n                      self.current.issue_options.Options[_i] = {\n                        key: self.issueoptions[_i],\n                        value: self.current.issue_options.Options[_i] && self.current.issue_options.Options[_i].value \n                          ? self.current.issue_options.Options[_i].value\n                          : \"\"\n                      };\n                    }\n\n                    /* Copy into issues Database */\n\n                    if (self.issues.Issues.length && self.current.issue) {\n                      self.issues.Issues.forEach((i) => {\n                        if (i.Id == self.current.issue) {\n                          i.Name    = self.current.issue_options.Name;\n                          i.Options = self.current.issue_options.Options;\n                        }\n                      })\n                    }\n                  }\n                  else {\n                    self.trackReferences(d.doc.data);\n                    self.data.push(d.doc.data);\n                  }\n                }\n              }\n            });\n            self.data.sort(function (a, b) {\n              return a.sort - b.sort;\n            });\n            self.state.initialized = true;\n            try {\n              if (self.current.page !== undefined) {\n                self.events.publish('page:change', self.current.page);\n              }\n            } catch (err) {\n              console.log('self.current.page not defined');\n            }\n            \n            resolve(true);\n          } catch(err) {\n            console.log(\"ERROR SYNCING DATA\", err);\n            reject(false);\n          }\n        });\n      }\n\n      // live syncer - attach after one time syncer\n      let _syncer = function() {\n        console.log(\"_START SYNCER_\");\n        try {\n          self.pouch.data_sync.cancel();\n        } catch (err) {\n          console.log(\"nothing to cancel!\")\n        }\n        try {\n          self.pouch.data_sync = self.pouch.data[self.current.issue].sync(`${self.credentials.server}/db/issue-${self.current.issue}`, self.helpers._syncsettings(self))\n          .on('change', async function (info) {\n            self.state.busy = 1;\n            if (info.direction === \"pull\" ) {\n              try {\n                await _localload(false);    \n                self.events.publish('sync:contribution', 'change');\n              } catch (err) {\n                console.log(err)\n                self.events.publish('sync:contribution', 'change');\n              }\n            }\n          })\n          .on('paused',   async function (err)  {\n            self.state.busy = 0;\n            self.events.publish('sync:contribution', 'paused');\n          })\n          .on('error', function (err) {\n            console.log(err)\n            self.events.publish('sync:contribution', 'error');\n          })\n          .on('active',   function ()     {self.events.publish('sync:contribution', 'active');})\n          .on('denied',   function ()     {self.events.publish('sync:contribution', 'denied');})\n          .on('complete', function ()     {self.events.publish('sync:contribution', 'complete');});\n        } catch (err){\n          console.log(err);\n          self.events.publish('sync:contribution', 'noconnection');\n        }\n      }\n      \n      \n      console.log(\"attach syncing\");\n\n      try {\n        await _localload(true);\n        _syncer();\n        resolve(true);  \n      } catch(err) {\n        console.log(err)\n        reject(false);\n      }\n\n      // attach syncing\n      /*try {\n        try {\n          if (this.pouch.issues_rep !== null) this.pouch.issues_rep.cancel();\n        } catch (err) {\n          console.log(\"nothing to cancel!\")\n        }\n        this.pouch.issues_rep =  this.pouch.data[this.current.issue].replicate.from(`${this.credentials.server}/db/issue-${this.current.issue}`, this.helpers._replicatesettings(this)).then(async function (result) {\n          try {\n            await _localload(true);\n            _syncer();\n          } catch(err) {\n            console.log(err)\n          }\n          resolve(true);  \n        }).catch(function (err) {\n          console.log(err);\n          reject(false);\n        });\n      }\n      catch (err) {\n        console.log(err);\n        reject(false);\n      }*/\n\n    });\n  }\n\n  async destroyDB() {\n    if (this.pouch.issues_sync && typeof this.pouch.issues_sync.cancel === \"function\") {\n      this.pouch.issues_sync.cancel();\n      this.pouch.issues_sync = null;\n    }\n    if (this.pouch.data_sync && typeof this.pouch.data_sync.cancel === \"function\") {\n      this.pouch.data_sync.cancel();\n      this.pouch.data_sync = null;\n    }\n    try {\n      await this.pouch.issues.destroy();  \n      console.log(\"issues destroyed\");\n    } catch (err) {\n      console.log(\"issues not found\");\n    }\n    try {\n      await this.pouch.credentials.destroy();\n      console.log(\"credentials destroyed\");\n    } catch (err) {\n      console.log(\"credentials not found\");\n    }   \n    try {\n      await this.pouch.settings.destroy();\n      console.log(\"settings destroyed\");\n    } catch (err) {\n      console.log(\"settings not found\");\n    }   \n    if (this.pouch.data != undefined && this.pouch.data.length) {\n      for (let k = 0; k < this.pouch.data.length; k++) {\n        let d = this.pouch.data[k];\n        if (d && typeof d.destroy === \"function\") {\n          try {\n            await d.destroy();\n            console.log(\"data destroyed\");\n          } catch (err) {\n            console.log(\"data not found\");\n          }   \n        }\n      }\n    }\n    this.pouch.settings = null;\n    this.pouch.issues = null;\n    this.pouch.credentials = null;\n    this.pouch.data = [];\n    this.issues = null;\n    this.state.initialized = false;\n    this.hideLoadingCtrl();\n  }\n\n  /*\n   * Store Issue Info in Meta-Contribution and issue database\n   */\n\n  async dbIssuesStore() {\n    try {\n      await this.helpers._pouchsave(this.pouch.data[this.current.issue], `contribution-${this.current.issue}-options`, this.current.issue_options);  \n      this.issues.Issues.forEach((i) => {if (i.Id == this.current.issue) {i.Name = this.current.issue_options.Name;}})\n      try {\n        await this.helpers._pouchsave(this.pouch.issues, `issues`, this.issues);\n      } catch (err) {\n        console.log(err);\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  /**\n  *\n  *  Store Documents\n  *\n  **/\n\n  async dbStore(data:any) {\n    let document = `contribution-${this.current.issue}-${data.syncId}`;\n    if (!this.current.issue) {\n      return;\n    }\n    try {\n      console.log(\"saving...\", document, data)\n      await this.helpers._pouchsave(this.pouch.data[this.current.issue], document, data);  \n    } catch (err) {\n      console.log(err)\n    }\n  }\n\n  change() {\n    if (this.state.initialized === false) return;\n    if (this.data[this.current.page] === undefined) return;\n    this.data[this.current.page].modified = 0;\n    this.dbStore(this.data[this.current.page]);\n    //console.log('Local Store Doc Complete', this.current.page, this.data[this.current.page]);\n  }\n\n  reorder(indexes){\n    if (this.state.initialized === false) return;\n    this.data = reorderArray(this.data, indexes);\n    this.data.forEach((e,i) => {\n      if (e.sort != i) {\n        e.sort = i;\n        this.dbStore(e);\n      }\n    })\n  }\n\n  delete(item) {\n    let _self = this;\n    if (this.state.initialized === false) return;\n\n    // Move Page back before delete if on the last page\n    if (this.current.page == this.data.length - 1 && this.current.page > 0) {\n      this.current.page--;\n      this.events.publish('page:change', this.current.page);\n    }\n    let _delete = this.data.splice(item, 1);\n    this.pouch.data[this.current.issue].get(`contribution-${this.current.issue}-${_delete[0].syncId}`).then(function (doc) {\n      console.log(`Deleted ${_delete[0].syncId} from DB`);\n      return _self.pouch.data[_self.current.issue].put({\n        _id: doc._id,\n        _rev: doc._rev,\n        _deleted: true,\n        data: doc.data.id\n      })\n    });\n  }\n\n  add(position: number) {\n    let _data = {\n      name: 'rf001',\n      title: 'Empty Title',\n      body: \"Write Here\",\n      id: -1,\n      sort: 0,\n      moddate: 0,\n      modified: 0,\n      status: false,\n      issue: this.current.issue,\n      syncId: this.guid(),\n      settings: {}\n    };\n    if (this.online) {\n      this.showLoadingCtrl(\"Adding new Entry\");\n    }\n    this.dbStore(_data);\n    this.data.splice(position, 0, _data);\n    this.data.forEach((e,i) => {\n      if (e.sort != i) {\n        e.sort = i;\n        this.dbStore(e);\n       }\n    })\n    this.setCurrent(position);\n    this.events.publish('page:change', position);\n  }\n\n  dataMigration(id?: number) {\n    let _check = false;\n    id = id || this.current.page;\n    if (this.data[this.current.page].status === undefined) {\n      this.data[this.current.page].status = false;\n      _check = true;\n    }\n    if (_check === true) {\n      console.log(`data migration needed: ${id}`);\n      this.change();\n    }\n  }\n\n  setCurrent(id:number) {\n    if (this.state.initialized === false) return;\n    console.log(\"Updating Current Set \", id);\n    this.current.page = id;\n    this.dataMigration();\n  }\n\n  getCurrentData() {\n    return this.data[this.current.page];\n  }\n\n  getCurrent() {\n    return this.current.page;\n  }\n\n  async checkUrl() {\n    let self = this;\n    return new Promise(async (resolve, reject) => {\n      try {\n        let _res = await self.http.get(self.credentials.server).toPromise();\n        if (_res.ok === true && _res.json().application === \"Rokfor Writer Server\") {\n          let _v = _res.json().version.split(\".\");\n          if (parseInt(_v[0]) >= this.min_server[0] && parseInt(_v[1]) >= this.min_server[1] && parseInt(_v[0]) >= this.min_server[2])\n            resolve(true);\n          else  \n            reject(`Server Version mismatch: ${this.min_server[0]}.${this.min_server[1]}.${this.min_server[2]} required.`);\n        }\n        else {\n          reject(\"Server connection failed. Server probably down.\");\n        }\n      } catch (err) {\n        reject(\"Server connection failed. Connection required for initial login.\")\n      }\n      \n      \n\n    });\n  }\n\n  async logIn() {\n    this.state.initialized = false;\n    this.showLoadingCtrl(\"Logging in. Network connection required.\");\n    try {\n      await this.checkUrl();\n    } catch (err) {\n      this.showAlert(\"Server Connection Failed\", err, null);\n      this.hideLoadingCtrl();\n      return;\n    }\n    if (this.pouch.credentials == null) {\n      this.pouch.credentials = await this.helpers._pouchcreate('rfWriter-credentials', this.dbsettings.adapter);\n    }\n    await this.helpers._pouchsave(this.pouch.credentials, 'credentials', this.credentials);\n    this.initialize();\n  }\n\n  logOut() {\n    this.showLoadingCtrl(\"Logging out\");\n    this.credentials = {user: \"\", key: \"\", server: \"\", group: \"\"};\n    this.helpers._pouchsave(this.pouch.credentials, 'credentials', this.credentials);\n    this.issues = false;\n    this.current = {\n      page          : 0,\n      issue         : null,\n      issue_options : {},\n      exports       : {}\n    }\n    this.state.initialized = false;\n    this.state.logged_in = false;\n    this.data = [];\n    this.destroyDB();\n  }\n\n  guid() {\n    function s4() {\n      return Math.floor((1 + Math.random()) * 0x10000)\n        .toString(16)\n        .substring(1);\n    }\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\n      s4() + '-' + s4() + s4() + s4();\n  }\n\n  bookStore() {\n    if (this.timeout.book !== null) {\n      clearTimeout(this.timeout.book);\n    }\n    this.timeout.book = setTimeout(() => {\n      this.dbIssuesStore();\n      this.updateBibTex();\n      console.log(`Issues Stored`);\n\n    }, 1000);\n\n\n  }\n\n  async _call(url, message, postdata, returnResult) {\n    postdata = postdata || {};\n    returnResult = returnResult || false;\n    try {\n      let _headers = new Headers({'Content-Type': 'application/json'});\n      let _res = await this.http.post(\n        this.credentials.server + url, \n        JSON.stringify({\n          credentials: this.credentials,\n          data: postdata}),\n          {headers: _headers}).toPromise();\n      if (returnResult===true) {\n        return _res.json();\n      }\n      else {\n        if (_res.ok === true && _res.json().state === \"ok\") {\n          this.showAlert(\"OK\", message, null);\n        }\n        if (_res.json().state === \"error\") {\n          this.showAlert(\"Error\", _res.json().message, null);\n        }        \n      }\n    } catch (err) {\n      if (returnResult===true) {\n        return false;\n      }\n      else {\n        console.log(err);\n        this.showAlert(`Error ${err.status||\"\"}`, `${err.statusText||\"\"}<br>${err.url||\"\"}`, null);        \n      }\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/rfapi.component.ts","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// util (ignored)\n// module id = 817\n// module chunks = 1","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// util (ignored)\n// module id = 819\n// module chunks = 1","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// fs (ignored)\n// module id = 839\n// module chunks = 1","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// http (ignored)\n// module id = 840\n// module chunks = 1","/* (ignored) */\n\n\n//////////////////\n// WEBPACK FOOTER\n// https (ignored)\n// module id = 841\n// module chunks = 1","import { Directive, HostListener, ElementRef } from \"@angular/core\";\n\n@Directive({\nselector: \"ion-textarea[autoresize]\" // Attribute selector\n})\nexport class Autoresize {\n\n  //@HostListener(\"input\", [\"$event.target\"])\n  //onInput(textArea: HTMLTextAreaElement): void {\n  //  this.adjust();\n  //}\n\n  constructor(public element: ElementRef) {\n    this.element = element;\n    setTimeout(() => this.adjust(), 0);\n  }\n\n  @HostListener('input') onTextareaInput() {\n    setTimeout(() => this.adjust(), 0);\n  }\n\n  ngAfterViewInit(): void {\n    setTimeout(() => this.adjust(), 0);\n  }\n  \n  ngOnInit():void {\n    setTimeout(() => this.adjust(), 0);\n  }\n\n  ngOnChanges():void {\n    setTimeout(() => this.adjust(), 0);\n  }\n\n  adjust(): void {\n    let ta = this.element.nativeElement.querySelector(\"textarea\");\n    if (ta !== null) {\n      ta.style.overflow = \"hidden\";\n      ta.style.height = \"auto\";\n      ta.style.height = ta.scrollHeight + \"px\";\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/directives/shrink.ts","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n    name: 'myfilter',\n    pure: false\n})\nexport class MyFilterPipe implements PipeTransform {\n    transform(items: any[], filter: string): any {\n        if (!items || !filter) {\n            return items;\n        }\n        // filter items array, items which match and return true will be\n        // kept, false will be filtered out\n        return items.filter(function(item) {\n          return item.Name.match(new RegExp(filter, \"gi\")) !== null;\n        });\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pipes/myfilter.pipe.ts"],"sourceRoot":""}